<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Auth System</title>
    <style>
        body { font-family: Arial; text-align: center; padding-top: 50px; }
        .form-container { display: inline-block; padding: 20px; border: 1px solid #ccc; border-radius: 10px; width: 300px; }
        input { width: 90%; margin: 10px 0; padding: 8px; }
        button { width: 95%; padding: 10px; cursor: pointer; margin-top: 5px; }
        .register-btn { background-color: #28a745; color: white; border: none; }
        .login-btn { background-color: #007bff; color: white; border: none; }
    </style>
</head>
<body>

    <!-- Sign Up Form -->
    <div id="signUpArea" class="form-container">
        <h2>Sign Up</h2>
        <input type="text" id="regUser" placeholder="Choose Username" required>
        <input type="password" id="regPass" placeholder="Choose Password" required>
        <button class="register-btn" onclick="registerUser()">Sign Up</button>
        <p>Already have an account? <a href="#" onclick="toggleForms()">Login</a></p>
    </div>

    <!-- Login Form (Initially Hidden) -->
    <div id="loginArea" class="form-container" style="display:none;">
        <h2>Login</h2>
        <input type="text" id="loginUser" placeholder="Username" required>
        <input type="password" id="loginPass" placeholder="Password" required>
        <button class="login-btn" onclick="loginUser()">Login</button>
        <p>No account? <a href="#" onclick="toggleForms()">Sign Up</a></p>
    </div>

    <script>
        function toggleForms() {
            const signup = document.getElementById('signUpArea');
            const login = document.getElementById('loginArea');
            signup.style.display = signup.style.display === 'none' ? 'block' : 'none';
            login.style.display = login.style.display === 'none' ? 'block' : 'none';
        }

        function registerUser() {
            const user = document.getElementById('regUser').value;
            const pass = document.getElementById('regPass').value;

            if (user && pass) {
                // Store using the username as the key
                localStorage.setItem(user, pass);
                alert("Registration successful! You can now log in.");
                toggleForms();
            } else {
                alert("Please fill in all fields.");
            }
        }

        function registerUser() {
    const user = document.getElementById('regUser').value;
    const pass = document.getElementById('regPass').value;

    if (user && pass) {
        // 1. Get existing users or start with an empty array
        let users = JSON.parse(localStorage.getItem('users')) || [];

        // 2. Check if username is already taken
        if (users.some(u => u.username === user)) {
            alert("Username already exists!");
            return;
        }

        // 3. Add new user and save back to localStorage
        users.push({ username: user, password: pass });
        localStorage.setItem('users', JSON.stringify(users));
        
        alert("Registration successful!");
        toggleForms();
    }
}

function loginUser() {
    const userInput = document.getElementById('loginUser').value;
    const passInput = document.getElementById('loginPass').value;
    
    // 1. Retrieve the full list of users
    const users = JSON.parse(localStorage.getItem('users')) || [];

    // 2. Search for a matching user object
    const validUser = users.find(u => u.username === userInput && u.password === passInput);

    if (validUser) {
        // 3. Set the "active" session user
        localStorage.setItem('currentUser', validUser.username);
        window.location.href = 'dashboard.html';
    } else {
        alert("Invalid username or password.");
    }
}
    </script>
</body>
</html>
